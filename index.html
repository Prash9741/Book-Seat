<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Seat</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- FIXED TOP BAR -->
<div class="top-bar-fixed">
    <div>
    <div class="header-pill">
        <span class="back-arrow">←</span>
        <span class="header-title" style="color:#616161;">Book Seat for Time Slots</span>
    </div>
    </div>
  <div class="circle-btn">⋮</div>
</div>

<!-- FULL WIDTH BAR BELOW HEADER -->
<div class="header-divider"></div>

<div class="app">

  <!-- BLUE NOTICE (CORRECT SYSTEM) -->
  <div class="info-card">
    <a href="#" style="color:#368de3;">Click Here</a> to view the cities/DCs where only full-day seat booking is enabled.
  </div>

  <!-- Booking Updates -->
  <div class="section">
    <h2>Booking Updates</h2>
    <div class="bookedSlot" id="bookedSlot">
        <div class="datePanel"><span id="bookingDate">27-Dec-2025</span><span class="book">Booked</span></div>
        <div class="editable-text" data-value="NOSTP 01 10 C 186">
          NOSTP 01 10 C 186
        </div>
        <div class="editable-text" data-value="Noida, NOSTP, ACECAPITOL, FLOOR-10, C">
            Noida, NOSTP, ACECAPITOL, FLOOR-10, C
        </div>
        <div>
            08:00AM - 02:00PM
        </div>
        <div style="color:#7653bd;">Cancel</div>
    </div>
  </div>
  <!-- DATE -->
  <div class="section">
    <h2>Date</h2>
    <div class="date-row" id="dateRow"></div>
  </div>

  <!-- CITY -->
  <div class="section">
    <h2>City</h2>
    <div class="summary-btn disabled">
      <span style="color:#212121">Noida</span>
      <span class="summary-icon">v</span>
    </div>
  </div>

  <div class="section">
    <div class="thin-divider"></div>
    <h2>Development Center</h2>
    <div class="thin-divider"></div>
</div>
  <!-- DEVELOPMENT CENTER -->
  <div class="section dc-section">

    <button class="summary-btn dc-title open" onclick="toggleDC(this)">
      <span class="dc-name">NOIDA-STP</span>
      <span class="summary-icon">^</span>
    </button>

    <div class="dc-content open">
      <div class="building" syt>
        <p>ACECAPITOL, FLOOR-10, C</p>
        <div class="slots">
        <div class="slot disabled slot-main">
            <span>08:00AM - 02:00PM</span>
            <span style="visibility: hidden;">space</span>
            <small>0 Seat(s)</small>
        </div>

        <div class="slot disabled slot-main">
            <span>02:00PM - 08:00PM</span>
            <span style="visibility: hidden;">space</span>
            <small>0 Seat(s)</small>
        </div>

        <div class="slot slot-side"></div>
        </div>
      </div>
      <div class="building" syt>
        <p>ACECAPITOL, FLOOR-10, A</p>
        <div class="slots">
        <div class="slot disabled slot-main">
            <span>08:00AM - 02:00PM</span>
            <span style="visibility: hidden;">space</span>
            <small>0 Seat(s)</small>
        </div>

        <div class="slot disabled slot-main">
            <span>02:00PM - 08:00PM</span>
            <span style="visibility: hidden;">space</span>
            <small>0 Seat(s)</small>
        </div>

        <div class="slot slot-side"></div>
        </div>
      </div>
      <div class="building" syt>
        <p>BHUT01, FLOOR-16, A</p>
        <div class="slots">
        <div class="slot disabled slot-main">
            <span>08:00AM - 02:00PM</span>
            <span style="visibility: hidden;">space</span>
            <small>0 Seat(s)</small>
        </div>

        <div class="slot disabled slot-main">
            <span>02:00PM - 08:00PM</span>
            <span style="visibility: hidden;">space</span>
            <small>0 Seat(s)</small>
        </div>

        <div class="slot slot-side"></div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- FLOATING ALLOCATED BUTTON (CORRECT SYSTEM) -->
<div class="bottom-wrapper">
  <button class="bottom-btn" disabled>
    Get System Allocated Seat
  </button>
</div>
<script>
/* =======================
   DATE LOGIC
======================= */

const dateRow = document.getElementById("dateRow");
const bookingDateEl = document.getElementById("bookingDate");

const days = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

/* Format: 27-Dec-2025 */
function formatPanelDate(date) {
  const d = String(date.getDate()).padStart(2, "0");
  return `${d}-${months[date.getMonth()]}-${date.getFullYear()}`;
}

/* Format card text */
function formatCardDate(date) {
  return {
    dayName: days[date.getDay()],
    shortDate: `${date.getDate()} ${months[date.getMonth()]}`
  };
}

/* Update datePanel */
function updateBookingDate(date) {
  if (bookingDateEl) {
    bookingDateEl.textContent = formatPanelDate(date);
  }
}

/* Render date cards */
function renderDateCards(totalDays = 2) {
  dateRow.innerHTML = "";

  for (let i = 0; i < totalDays; i++) {
    const date = new Date();
    date.setDate(date.getDate() + i);

    const { dayName, shortDate } = formatCardDate(date);

    const card = document.createElement("div");
    card.className = "date-card" + (i === 0 ? " active" : "");
    card.dataset.date = date.toISOString();

    card.innerHTML = `
      <span>${dayName}</span>
      <span style="visibility:hidden;">Space</span>
      <span>${shortDate}</span>
    `;

    card.onclick = () => selectDate(card);

    dateRow.appendChild(card);

    // Set today as default
    if (i === 0) updateBookingDate(date);
  }
}

/* Handle date selection */
function selectDate(selectedCard) {
  document.querySelectorAll(".date-card").forEach(card =>
    card.classList.remove("active")
  );

  selectedCard.classList.add("active");
  updateBookingDate(new Date(selectedCard.dataset.date));
}

/* =======================
   DC TOGGLE
======================= */

function toggleDC(btn) {
  const content = btn.nextElementSibling;
  const icon = btn.querySelector(".summary-icon");

  content.classList.toggle("open");
  icon.textContent = content.classList.contains("open") ? "^" : "v";
}

/* =======================
   INLINE EDIT (dblclick)
======================= */

document.addEventListener("dblclick", function (e) {
  const target = e.target.closest(".editable-text");
  if (!target) return;

  // Prevent reopening editor
  if (target.querySelector("input, textarea")) return;

  const originalText = target.textContent.trim();

  const isMultiLine =
    originalText.length > 25 || originalText.includes(",");

  const input = isMultiLine
    ? document.createElement("textarea")
    : document.createElement("input");

  input.value = originalText;
  input.className = isMultiLine ? "edit-textarea" : "edit-input";

  const okBtn = document.createElement("button");
  okBtn.textContent = "OK";

  const actions = document.createElement("div");
  actions.className = "edit-actions";
  actions.appendChild(okBtn);

  target.textContent = "";
  target.appendChild(input);
  target.appendChild(actions);

  input.focus();

  okBtn.onclick = () => {
    const newValue = input.value.trim() || originalText;
    target.textContent = newValue;
    target.dataset.value = newValue;
  };

  // Save on Enter (single-line)
  input.addEventListener("keydown", (ev) => {
    if (ev.key === "Enter" && input.tagName === "INPUT") {
      okBtn.click();
    }
  });
});

/* =======================
   INIT
======================= */

renderDateCards(2);
</script>


</body>
</html>
